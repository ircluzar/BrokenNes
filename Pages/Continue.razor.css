.options-root{max-width:760px;margin:2rem auto;padding:1.5rem 2rem;border:4px solid #ffffff;outline:4px solid #ff5a26;outline-offset:-8px;background:transparent;color:#fff;font-family:'Press Start 2P', monospace;}
.options-root{position:relative;overflow:hidden;}
.opt-title{margin:0 0 1.25rem;font-size:1.6rem;color:#ff5a26;}
.opt-sections{display:flex;flex-direction:column;gap:1.5rem;}
.opt-section{border:3px solid #fff;padding:1rem;margin-bottom:1.25rem}
.opt-h3{margin:0 0 .75rem;font-size:1rem;color:#fff;}
.opt-h3 .panel-toggle{all:unset;display:inline-flex;align-items:center;gap:.4rem;cursor:pointer;font:inherit;color:inherit}
.opt-h3 .panel-toggle:focus{outline:2px solid #ff5a26;outline-offset:2px}
.opt-h3 .panel-toggle .toggle-ico{opacity:.85;font-size:.85em}
.opt-row{display:flex;align-items:center;gap:1rem;font-size:.7rem;margin-bottom:.6rem;}
/* Align labels left and sliders right with equal width */
.opt-row label{flex:1;}
.opt-row input[type=range]{flex:0 0 260px; margin-left:auto;}
.opt-row select,.opt-row button,.opt-row input[type=range]{background:#000;color:#fff;border:2px solid #ff5a26;font-family:'Press Start 2P', monospace;font-size:.65rem;padding:.25rem .4rem;}
.opt-row select:disabled,.opt-row button:disabled{opacity:.5;}
.small-note{opacity:.6;font-size:.55rem;}
.opt-footer{margin-top:2rem;text-align:center;}
.opt-link{display:inline-block;padding:.7rem 1.4rem;border:3px solid #ff5a26;color:#fff;text-decoration:none;font-size:.7rem;}
.opt-link:hover,.opt-link:focus{background:#ff5a26;color:#000;}
/* Start button specific states */
.start-btn{background:#000 !important;}
.start-btn.unlocked{border-color:#ff5a26;color:#fff;cursor:pointer}
.start-btn.unlocked:hover,.start-btn.unlocked:focus{background:#0a0a0a;color:#fff;outline:2px solid #ff5a26;outline-offset:2px}
.start-btn.locked{border-color:#555;color:#9ca3af;cursor:default}
.start-btn.locked:hover,.start-btn.locked:focus{background:#000;color:#9ca3af;outline:none}

/* Continue page customizations */
.continue-root .cont-header{border:3px solid #fff;padding:1rem;margin-bottom:1.5rem}
.continue-root .hdr-main{display:flex;justify-content:space-between;align-items:center;gap:.75rem;margin-bottom:.75rem}
.continue-root .lvl-title{display:flex;align-items:center;gap:.6rem;font-size:.9rem}
.continue-root .lvl-title .chip{display:inline-block;background:#fff;color:#000;padding:.15rem .35rem;border:2px solid #ff5a26}
.continue-root .lvl-title strong{line-height:1.2;word-break:break-word}
.continue-root .lvl-status .status-chip{display:inline-block;padding:.2rem .4rem;border:2px solid #fff;font-size:.65rem}
.continue-root .lvl-status .status-chip.cleared{background:#10b981;border-color:#10b981;color:#000}
.continue-root .lvl-status .status-chip.not-cleared{background:#374151;border-color:#9ca3af;color:#fff}
.continue-root .lvl-status .status-chip.spotlit{box-shadow:0 0 0 4px #fff, 0 0 0 8px #ff5a26; position:relative; z-index:10002}
.continue-root .hdr-cards{display:flex;align-items:flex-start;gap:.4rem;flex-wrap:wrap}
.continue-root .enf-chip{background:#000;color:#fff;border:2px solid #fff;font-size:.6rem;padding:.2rem .35rem;cursor:pointer}
.continue-root .enf-chip:hover{background:#111}
.continue-root .hdr-cta{margin-top:.75rem}
.continue-root .btn-next{background:#000;color:#fff;border:3px solid #ff5a26;font-family:'Press Start 2P', monospace;font-size:.7rem;padding:.45rem .8rem}
.continue-root .btn-next:disabled{opacity:.5}
.continue-root .btn-next.spotlit{box-shadow:0 0 0 4px #fff, 0 0 0 8px #ff5a26; position:relative; z-index:10002}

.core-grid{display:grid;grid-template-columns:repeat(4,minmax(0,1fr));gap:1rem;justify-items:center}
.core-slot{position:relative;border:2px solid #fff;min-height:92px;padding:.5rem}
.core-slot .slot-title{font-size:.75rem;margin-bottom:.5rem;color:#fff;text-align:center}
.core-slot .slot-body{display:flex;align-items:center;justify-content:center;min-height:56px}
/* Card presentation inside slot */
.core-slot .card-wrap{position:relative;display:inline-block;line-height:0;z-index:1}
.core-slot .card-wrap svg{display:block;width:142px;height:200px}
/* Empty placeholder panel for unselected, unenforced slots */
.core-slot .slot-empty{display:flex;align-items:center;justify-content:center;min-width:142px;min-height:200px;background:#1a1a1a;color:#9ca3af;border:2px dashed #9ca3af;font-family:'Press Start 2P', monospace;font-size:.6rem;padding:.5rem;cursor:pointer}
.core-slot .slot-empty:hover{background:#202020;color:#cbd5e1;border-color:#cbd5e1}
/* Clickable cover for unlocked slots (covers the svg) */
.core-slot .card-cover-btn{position:absolute;inset:0;background:transparent;border:0;cursor:pointer;z-index:1001;padding:0;margin:0}
.core-slot .card-cover-btn:focus{outline:2px solid #ff5a26;outline-offset:2px}
/* Overlay for locked state - semi-transparent black with centered "Enforced" text */
.core-slot .card-enforced-overlay{
  position:absolute;
  inset:0;
  background:rgba(0,0,0,0.75);
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:10;
  pointer-events:none;
}
.core-slot .card-enforced-overlay .enforced-text{
  color:white;
  font-size:0.9rem;
  font-weight:bold;
  text-align:center;
  text-shadow:0 1px 2px rgba(0,0,0,0.8);
}
/* Legacy label/button (kept for fallback; hidden when using svg cards) */
.core-slot .slot-label{display:none}
.core-slot .slot-pick{display:none}

.rom-box,.ach-box{border:2px dashed #fff;padding:.75rem}
.game-box{border:2px dashed #fff;padding:.75rem}
/* Space between ROM selector (picker) and game info when merged */
.rom-selector + .game-box{margin-top:.9rem}

/* ROM selector */
.rom-selector{display:flex;flex-direction:column;gap:.5rem}
.rom-toolbar{display:flex;align-items:center;gap:.75rem;justify-content:space-between}
.rom-toolbar .rom-search{flex:0 0 260px;max-width:60%;background:#000;border:2px solid #ff5a26;color:#fff;font-family:'Press Start 2P', monospace;font-size:.65rem;padding:.25rem .4rem;box-sizing:border-box;min-width:0}
.ach-toolbar{display:flex;align-items:center;gap:.75rem;justify-content:space-between;margin:.35rem 0 .25rem}
.ach-toolbar .rom-search{
  flex:0 0 260px;
  max-width:60%;
  background:#000;
  border:2px solid #ff5a26;
  color:#fff;
  font-family:'Press Start 2P', monospace;
  font-size:.65rem;
  padding:.25rem .4rem;
}
.continue-root .ach-summary{display:flex;gap:.4rem;align-items:baseline;font-size:.6rem}
.continue-root .ach-list{list-style:none;margin:.4rem 0 0;padding:0;display:flex;flex-direction:column;gap:.3rem}
/* Make achievements text smaller */
.continue-root .ach-item{display:flex;align-items:center;gap:.45rem;font-size:.7rem}
.continue-root .ach-item .ach-check{opacity:.85;font-size:.72rem;line-height:1}
.continue-root .ach-item .ach-title{font-size:.64rem;line-height:1.2}
/* Description already has .small-note (.55rem); keep it subtle */
.continue-root .ach-item .ach-desc{opacity:.75}
/* Difficulty chip styling, smaller to match list scale */
.continue-root .ach-item .ach-diff{display:inline-block;border:2px solid #fff;background:#000;color:#fff;padding:.06rem .3rem;font-size:.55rem}
.rom-empty{border:2px dashed #fff;padding:.75rem}

.rom-table{display:block;border:2px solid #fff;--rom-cols: 3fr 1fr 1fr}
.rom-thead{background:#111;border-bottom:2px solid #fff}
.rom-tr{display:grid;grid-template-columns:var(--rom-cols);gap:0;align-items:center}
.rom-th,.rom-td{padding:.5rem}
.rom-th{font-size:.55rem}
.rom-td{font-size:.75rem;background:#000;color:#fff;border-bottom:1px solid #333;text-align:left;cursor:pointer;width:100%}
.rom-td:hover{background:#0a0a0a}
.rom-td.selected{outline:2px solid #ff5a26;outline-offset:-2px;background:#111}
.rom-td.disabled{opacity:.5;cursor:not-allowed}
.rom-title{font-weight:700;overflow:hidden;font-size:.40rem;line-height:1.1;display:-webkit-box;line-clamp:2;-webkit-line-clamp:2;-webkit-box-orient:vertical}
.rom-sub{font-size:.6rem;opacity:.7}
.rom-table .c-title{text-align:left}
.rom-table .c-compat{text-align:center}
.rom-table .c-ach{text-align:right}
.rom-table .c-title{min-width:0}
.rom-td .chip{display:inline-block;padding:.1rem .35rem;border:2px solid #fff;font-size:.6rem}
.rom-td .chip.ok{background:#10b981;border-color:#10b981;color:#000}
.rom-td .chip.no{background:#374151;border-color:#9ca3af;color:#fff}

/* Game info panel */
.game-grid{display:flex;flex-direction:column;gap:.25rem;font-size:.55rem}
.game-row{display:grid;grid-template-columns:1fr 2fr;gap:.5rem;align-items:start}
.game-row .label{opacity:.7}
.game-row .value{word-break:break-word}
.game-row.note .value{white-space:pre-wrap;word-break:break-word;overflow-wrap:anywhere}

/* Import styles */
.rom-toolbar-right{display:flex;align-items:center;gap:.5rem}
.rom-import-btn{padding:.35rem .6rem;font-size:.65rem;border:2px solid #ff5a26;background:#000;color:#fff;font-family:'Press Start 2P', monospace;cursor:pointer}
.rom-import-btn:hover{background:#0a0a0a}
.rom-cancel-btn{padding:.35rem .6rem;font-size:.65rem;border:2px solid transparent;background:transparent;color:#9ca3af;font-family:'Press Start 2P', monospace;cursor:pointer}
.import-modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.5);display:flex;align-items:center;justify-content:center;z-index:5000}
.import-modal{background:#000;color:#fff;border:3px solid #fff;outline:3px solid #ff5a26;outline-offset:-6px;border-radius:8px;padding:1rem;width:min(640px,92vw);max-height:85vh;overflow:auto}
.import-title{margin:0 0 .5rem;font-size:.9rem;color:#ff5a26}
.import-body{display:flex;flex-direction:column;gap:.5rem}
.import-controls{display:flex;gap:.5rem;align-items:center}
.import-drop{border:2px dashed #fff;padding:1rem;border-radius:8px;text-align:center;color:#9ca3af}
.import-list{margin:.25rem 0 0;padding-left:1.1rem}
.import-footer{display:flex;justify-content:flex-end;gap:.5rem;margin-top:.75rem}

/* Modal for card zoom (reuses patterns from other pages) */
.card-modal-backdrop{position:fixed;inset:0;background:#000b;display:flex;align-items:center;justify-content:center;z-index:12000;opacity:1;transition:opacity .18s ease}
.card-modal-backdrop.closing{opacity:0}
.card-modal-content{max-width:98vw;max-height:98vh;}

/* Arrival overlay when returning from an achievement */
.ach-arrive-overlay{position:fixed;inset:0;background:rgba(0,0,0,0.85);z-index:10000;pointer-events:none}
.ach-arrive-overlay .spotlight{position:absolute;inset:auto 16px 16px auto;width:320px;height:80px;border-radius:12px;box-shadow:0 0 0 9999px rgba(0,0,0,0.85);}
/* Try to align spotlight roughly over the Next button area (bottom-right). Adjust at small screens */
@media (max-width:640px){
  .ach-arrive-overlay .spotlight{left:16px;right:16px;bottom:16px;width:auto;height:68px}
}

/* ===== Continue Core Picker Modal ===== */
.cont-cp-modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,0.7);display:flex;align-items:flex-start;justify-content:center;z-index:8000;padding:16px}
.cont-cp-modal{background:#000;border:3px solid #fff;outline:3px solid #ff5a26;outline-offset:-6px;border-radius:10px;box-shadow:0 8px 24px rgba(0,0,0,.6);width:min(760px,96vw);margin-top:2rem}
.cont-cp-header{display:flex;align-items:center;justify-content:space-between;gap:.5rem;padding:.6rem .8rem;border-bottom:3px solid #fff;background:#0a0a0a}
.cont-cp-close{background:#000;color:#fff;border:2px solid #ff5a26;font-family:'Press Start 2P', monospace;font-size:.6rem;padding:.25rem .5rem}
.cont-cp-body{padding:.8rem;max-height:70vh;overflow:auto}
.cont-cp-list{display:flex;flex-direction:column;gap:.5rem}
.cont-cp-row{display:grid;grid-template-columns:1fr auto;gap:.5rem;align-items:center}
.cont-cp-select{display:grid;grid-template-columns:auto 1fr auto;align-items:center;gap:.6rem;padding:.55rem .7rem;border:2px solid #fff;background:#000;color:#fff;font-size:.7rem;text-align:left;cursor:pointer;width:100%}
.cont-cp-select:hover,.cont-cp-select:focus{background:#0a0a0a}
.cont-cp-view{background:#000;color:#fff;border:2px solid #ff5a26;font-family:'Press Start 2P', monospace;font-size:.6rem;padding:.3rem .6rem}
.row-main{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
.row-meta{display:flex;align-items:center;gap:10px;flex-wrap:wrap;justify-content:flex-end;margin-left:auto}
.meta-badge{border:1px solid #ff5a26;padding:.15rem .4rem}
.meta-perf{opacity:.95}
.meta-perf.perf-pos{color:#36ff5a}
.meta-perf.perf-neg{color:#ff5a26}
.meta-stars{letter-spacing:1px;color:#ffcc00;font-size:.85rem}
.pill{display:inline-block;padding:.1rem .35rem;border:1px solid #fff;background:#222;color:#fff;font-size:.65rem}
.pill-id{min-width:56px;text-align:center;display:inline-block}
.pill-rate-0{border-color:#6b7280;color:#6b7280}
.pill-rate-1{border-color:#ef4444;color:#ef4444}
.pill-rate-2{border-color:#f59e0b;color:#f59e0b}
.pill-rate-3{border-color:#10b981;color:#10b981}
.pill-rate-4{border-color:#3b82f6;color:#3b82f6}
.pill-rate-5{border-color:#a855f7;color:#a855f7}
.meta-badge.cat-col-0{border-color:#9ca3af;color:#e5e7eb}
.meta-badge.cat-col-1{border-color:#60a5fa;color:#bfdbfe}
.meta-badge.cat-col-2{border-color:#34d399;color:#bbf7d0}
.meta-badge.cat-col-3{border-color:#f59e0b;color:#fde68a}
.meta-badge.cat-col-4{border-color:#a78bfa;color:#ddd6fe}
.meta-badge.cat-col-5{border-color:#f87171;color:#fecaca}
.meta-badge.cat-col-6{border-color:#10b981;color:#a7f3d0}
.meta-badge.cat-col-7{border-color:#f472b6;color:#fbcfe8}

@media (max-width:640px){
  .cont-cp-body{max-height:72vh}
  .cont-cp-select{min-height:64px}
}

@media (max-width:620px){
  .options-root{margin:1rem;border-width:3px;outline-width:3px;padding:1rem 1.1rem;}
  .opt-title{font-size:1.2rem;}
  .opt-row{flex-wrap:wrap;}
  .opt-row label{flex:0 0 100%;}
  .opt-row input[type=range]{flex:1 1 100%; margin-left:0;}
  /* Header: stack nicely on mobile */
  .continue-root .hdr-main{flex-direction:column;align-items:flex-start;gap:.5rem;margin-bottom:.6rem}
  .continue-root .lvl-title{font-size:.85rem;gap:.45rem}
  .continue-root .lvl-title .chip{padding:.12rem .32rem}
  .continue-root .lvl-status .status-chip{font-size:.6rem;padding:.18rem .36rem}
  /* Enforced chips: wrap within the container; label on its own line */
  .continue-root .hdr-cards{flex-wrap:wrap;gap:.35rem;padding-bottom:.15rem}
  .continue-root .hdr-cards .small-note{flex:0 0 100%;margin-bottom:.1rem}
  .continue-root .enf-chip{white-space:nowrap;padding:.22rem .4rem}
  /* CTA: full-width button for easier tap */
  .continue-root .hdr-cta{margin-top:.5rem}
  .continue-root .btn-next{display:block;width:100%;text-align:center}
  .core-grid{grid-template-columns:repeat(2,minmax(0,1fr))}
  .rom-tr{grid-template-columns:2fr .8fr 1fr}
  .rom-toolbar{flex-wrap:wrap;justify-content:flex-start}
  .rom-toolbar-right{flex:1 1 100%;display:flex;flex-wrap:wrap}
  .rom-toolbar .rom-search{flex:1 1 100%;max-width:100%;width:100%;min-width:0}
  .ach-toolbar{flex-wrap:wrap}
  .ach-toolbar .rom-search{flex:1 1 100%;max-width:100%}
}

/* Ultra-small devices refinement */
@media (max-width:400px){
  .continue-root .lvl-title{font-size:.8rem}
  .continue-root .btn-next{font-size:.65rem;padding:.42rem .7rem}
}

/* ===== Lootbox Unlock Modal ===== */
.unlock-modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,0.8);display:flex;align-items:center;justify-content:center;z-index:9000;opacity:1;transition:opacity .18s ease}
.unlock-modal-backdrop.closing{opacity:0}
.unlock-modal{background:#000;border:3px solid #fff;outline:3px solid #ff5a26;outline-offset:-6px;border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,.7);width:min(880px,96vw);max-height:90vh;display:flex;flex-direction:column;gap:.5rem;padding:.9rem 1rem}
.unlock-header h3{margin:0;font-size:1.1rem;color:#ffcc00;text-align:center;text-shadow:0 0 10px rgba(255,204,0,0.5)}
.unlock-body{position:relative;padding:1rem .5rem}
.loot-stage{position:relative;display:flex;flex-wrap:wrap;gap:1rem;justify-content:center;align-items:center;min-height:240px}
.loot-card{position:relative;display:inline-block;width:142px;height:200px;background:transparent;border:0;padding:0;margin:0;cursor:pointer;animation:lootFloat 3s ease-in-out infinite}
.loot-card:nth-child(2){animation-delay:.2s}
.loot-card:nth-child(3){animation-delay:.4s}
.loot-card:nth-child(4){animation-delay:.6s}
.loot-card svg{display:block;width:142px;height:200px;filter:drop-shadow(0 8px 16px rgba(0,0,0,0.5))}
.unlock-actions{display:flex;justify-content:center;padding:.25rem 0 .5rem}
.unlock-ok{padding:.6rem 1.2rem;font-size:.75rem;border:3px solid #ff5a26;background:#000;color:#fff;font-family:'Press Start 2P', monospace;cursor:pointer}
.unlock-ok:hover,.unlock-ok:focus{background:#0a0a0a}
@keyframes lootFloat{0%{transform:translateY(0) rotate(0deg)}50%{transform:translateY(-8px) rotate(0.5deg)}100%{transform:translateY(0) rotate(0deg)}}
